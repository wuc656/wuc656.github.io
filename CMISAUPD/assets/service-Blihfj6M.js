import{r as v,q as D,b as l,c as d,z as C,d as p,u as x,i as h,A as w,H as c,g as y}from"./@vue-El9F00iI.js";import{a as j}from"./primevue-Cpy0qCi2.js";import{_ as F}from"./index-B2HebM-Z.js";import{a as u}from"./axios-upsvKRUO.js";const k={components:{Button:j},props:{isLoading:{type:Boolean},allowedExtension:{type:String,default:""}},setup(n){const{emit:e}=y(),a=v(0),t=o=>{console.log(o);const s=o.split(".").pop().toLowerCase();return console.log(s),console.log(n.allowedExtension),s===n.allowedExtension.toLowerCase()};return{isDragging:a,handleFileDrop:o=>{a.value=0;let s=o.dataTransfer.files;if(!t(s[0].name)){alert(`檔案 ${s[0].name} 的副檔名不符合要求`);return}e("handleFileDrop",s)},handleFileOpen:()=>{var o=document.createElement("input");o.type="file",o.accept="."+n.allowedExtension,o.addEventListener("change",async s=>{let f=s.target.files;if(!t(f[0].name)){alert(`檔案 ${f[0].name} 的副檔名不符合要求`);return}e("handleFileDrop",f),o=null},!1),o.click()},props:n}}},E={key:0,class:"flex ai:center"},B={class:"ml:8"},L={key:1,class:"text-center"},U={key:2};function _(n,e,a,t,r,i){const o=D("Button");return l(),d("div",{id:"btn-panel-upload",class:w(["flex jc:center ai:center",{"b:#777!":t.isDragging>0}]),onDragover:e[0]||(e[0]=c(()=>{},["prevent"])),onDragenter:e[1]||(e[1]=c(s=>t.isDragging++,["prevent"])),onDragleave:e[2]||(e[2]=c(s=>t.isDragging--,["prevent"])),onDrop:e[3]||(e[3]=c((...s)=>t.handleFileDrop&&t.handleFileDrop(...s),["prevent"]))},[t.isDragging==0&&!t.props.isLoading?(l(),d("div",E,[e[4]||(e[4]=C(" 拖曳至此或 ")),p("div",B,[x(o,{onClick:t.handleFileOpen,severity:"info",outlined:"",class:"p:9!",label:"點擊我"},null,8,["onClick"])])])):t.props.isLoading?(l(),d("div",L,e[5]||(e[5]=[p("div",{class:"mb:1.3rem f:1.4rem f:#777"},"上傳中...",-1),p("div",{class:"pi pi-spin pi-spinner f:2.8rem! f:#777"},null,-1)]))):h("",!0),t.isDragging==1?(l(),d("div",U,e[6]||(e[6]=[p("i",{class:"pi pi-cloud-upload f:6rem! f:#777"},null,-1)]))):h("",!0)],34)}const I=F(k,[["render",_],["__scopeId","data-v-6db57d21"]]),b="/CMISAUPDapi",m=n=>n?`${b}${n}`:"",P=u.create({headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},withCredentials:!0,timeout:6e3}),g=n=>(Promise.reject(n),n),M=(n="",e={})=>{let a=m(n);return u({method:"post",headers:{"Content-Type":"application/json"},url:a,data:e}).then(r=>r||Promise.reject()).catch(r=>{throw g(r)})},N=(n="",e={})=>{let a=m(n);return P({method:"get",url:a,params:e}).then(t=>t||Promise.reject()).catch(t=>{throw g(t)})},O=(n="",e={})=>{let a=m(n);return u({method:"delete",headers:{"Content-Type":"application/json"},url:a,data:e}).then(r=>r||Promise.reject()).catch(r=>{throw g(r)})},z=(n,e="",a={})=>{let t=m(e);return u({method:n,headers:{"Content-Type":"multipart/form-data"},url:t,data:a}).then(i=>i||Promise.reject()).catch(i=>{throw g(i)})};export{I as D,O as d,N as g,M as p,z as u};
