import{a as p}from"./axios-Cm0UX6qg.js";import{b as v,p as D,o as l,f as c,y as C,h,s as x,a as _,z as y,G as d,g as w,R as j,S as F}from"./@vue-B4Rme-ED.js";import{a as k}from"./primevue-CbY-VKnM.js";import{_ as B}from"./index-CeSPOaTc.js";const E="./api",u=e=>e?`${E}${e}`:"",L=p.create({headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},withCredentials:!0,timeout:6e3}),m=e=>(Promise.reject(e),e),G=(e="",n={})=>{let a=u(e);return p({method:"post",headers:{"Content-Type":"application/json"},url:a,data:n}).then(o=>o||Promise.reject()).catch(o=>{throw m(o)})},W=(e="",n={})=>{let a=u(e);return L({method:"get",url:a,params:n}).then(t=>t||Promise.reject()).catch(t=>{throw m(t)})},A=(e="",n={})=>{let a=u(e);return p({method:"delete",headers:{"Content-Type":"application/json"},url:a,data:n}).then(o=>o||Promise.reject()).catch(o=>{throw m(o)})},J=(e,n="",a={})=>{let t=u(n);return p({method:e,headers:{"Content-Type":"multipart/form-data"},url:t,data:a}).then(i=>i||Promise.reject()).catch(i=>{throw m(i)})},T={components:{Button:k},props:{isLoading:{type:Boolean},allowedExtension:{type:String,default:""}},setup(e){const{emit:n}=w(),a=v(0),t=r=>{console.log(r);const s=r.split(".").pop().toLowerCase();return console.log(s),console.log(e.allowedExtension),s===e.allowedExtension.toLowerCase()};return{isDragging:a,handleFileDrop:r=>{a.value=0;let s=r.dataTransfer.files;if(!t(s[0].name)){alert(`檔案 ${s[0].name} 的副檔名不符合要求`);return}n("handleFileDrop",s)},handleFileOpen:()=>{var r=document.createElement("input");r.type="file",r.accept="*/*",r.addEventListener("change",async s=>{let f=s.target.files;if(!t(f[0].name)){alert(`檔案 ${f[0].name} 的副檔名不符合要求`);return}n("handleFileDrop",f),r=null},!1),r.click()},props:e}}},g=e=>(j("data-v-04502f36"),e=e(),F(),e),U={key:0,class:"flex ai:center"},b={class:"ml:8"},I={key:1,class:"text-center"},P=g(()=>h("div",{class:"mb:1.3rem f:1.4rem f:#777"},"上傳中...",-1)),S=g(()=>h("div",{class:"pi pi-spin pi-spinner f:2.8rem! f:#777"},null,-1)),V=[P,S],N={key:2},O=g(()=>h("i",{class:"pi pi-cloud-upload f:6rem! f:#777"},null,-1)),R=[O];function q(e,n,a,t,o,i){const r=D("Button");return l(),c("div",{id:"btn-panel-upload",class:y(["flex jc:center ai:center",{"b:#777!":t.isDragging>0}]),onDragover:n[0]||(n[0]=d(()=>{},["prevent"])),onDragenter:n[1]||(n[1]=d(s=>t.isDragging++,["prevent"])),onDragleave:n[2]||(n[2]=d(s=>t.isDragging--,["prevent"])),onDrop:n[3]||(n[3]=d((...s)=>t.handleFileDrop&&t.handleFileDrop(...s),["prevent"]))},[t.isDragging==0&&!t.props.isLoading?(l(),c("div",U,[C(" 拖曳至此或 "),h("div",b,[x(r,{onClick:t.handleFileOpen,severity:"info",outlined:"",class:"p:9!",label:"點擊我"},null,8,["onClick"])])])):t.props.isLoading?(l(),c("div",I,V)):_("",!0),t.isDragging==1?(l(),c("div",N,R)):_("",!0)],34)}const K=B(T,[["render",q],["__scopeId","data-v-04502f36"]]);export{K as D,A as d,W as g,G as p,J as u};
